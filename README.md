**Разворачиваем сетевую лабораторию**

**1. Описание задания**

**Теоретическая часть**  

Найти свободные подсети
Посчитать сколько узлов в каждой подсети, включая свободные
Указать broadcast адрес для каждой подсети
проверить нет ли ошибок при разбиении  

**Практическая часть**  

Соединить офисы в сеть согласно схеме и настроить роутинг
Все сервера и роутеры должны ходить в инет черз inetRouter
Все сервера должны видеть друг друга
у всех новых серверов отключить дефолт на нат (eth0), который вагрант поднимает для связи
при нехватке сетевых интервейсов добавить по несколько адресов на интерфейс

Вводные данные:  

В виртуальной среде виртуалбокc при помощи вагрант файл разварачиваю несколько виртуальных хостов, часть из них будут являться маршутизаторами: inetRouter, centralRouter, office1Router, office2Router, часть из них будут являться серверами: centarlServer, office1Server, office2Server.

Планируемая архитектура.  

Сеть inetRouter.  
10.0.2.15/24 - интеренет  
192.168.255.1/30 - локальная сеть  

Сеть centralRouter.  
192.168.0.0/28 - directors  
192.168.0.32/28 - office hardware  
192.168.0.64/26 - wifi  
192.168.255.0/30 локальная сеть  

Сеть office1.  
192.168.2.0/26 - dev  
192.168.2.64/26 - test servers  
192.168.2.128/26 - managers  
192.168.2.192/26 - office hardware  

Сеть office2.  
192.168.1.0/25 - dev  
192.168.1.128/26 - test servers  
192.168.1.192/26 - office hardware 

```
Office1 ---\
----> Central --IRouter --> internet
Office2----/
```
**Необходимо**: автоматизировать настройку хостов через вагрантфайл:

1. Соединить офисы в сеть согласно схеме и настроить роутинг.
2. Все сервера и роутеры должны ходить в инет черз inetRouter.
3. Все сервера должны видеть друг друга.
4. У всех серверов отключить дефолт на нат (eth0), который вагрант поднимает для связи.

 **2. Выполенение задания.**

 **Теоритическая часть**
 
 

 **Практическая часть.**  
 
 В ручном режиме подключаясь по ssh  сконфигурировал узыл.
 
1. inetRouter
- настроил ipforwarding
- настроил NAT
- настроил обратный маршрут для пересылки с ната в локалку.

2. centralRouter
- отключил дефолтный маршрут на eth0
- включил дефолтный маршрут на eth1 192.168.255.1
- настроил ipforwarding

3. centarlServer
- отключил дефолтный маршрут на eth0
- включил дефолтный маршрут на eth1 192.168.0.1

4. office1Router
- отключил дефолтный маршрут на eth0
- включил дефолтный маршрут на eth1 192.168.255.9
- настроил ipforwarding

5. office2Router
- отключил дефолтный маршрут на eth0
- включил дефолтный маршрут на eth1 192.168.255.5
- настроил ipforwarding

6. office1Server
- отключил дефолтный маршрут на eth0
- включил дефолтный маршрут на eth1 192.168.2.1

7. office2Server
- отключил дефолтный маршрут на eth0
- включил дефолтный маршрут на eth1 192.168.1.1

Используюя команду `traceroute 8.8.8.8` проверил работу интернета на хосте office1Server, вывод команды ниже.
```
root@office1Server:~# traceroute 8.8.8.8
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  _gateway (192.168.2.129)  1.736 ms  1.587 ms  1.524 ms
 2  192.168.255.9 (192.168.255.9)  2.052 ms  1.943 ms  1.862 ms
 3  192.168.255.1 (192.168.255.1)  4.252 ms  3.549 ms  3.197 ms
 4  * * *
 5  * * *
 6  * * *
 7  * * *
 8  77.37.250.221 (77.37.250.221)  7.821 ms  5.616 ms  5.558 ms
 9  77.37.250.249 (77.37.250.249)  5.530 ms  6.958 ms  6.913 ms
10  72.14.209.81 (72.14.209.81)  6.878 ms  6.842 ms  6.954 ms
11  * * *
12  108.170.250.129 (108.170.250.129)  7.244 ms 108.170.250.33 (108.170.250.33)  7.180 ms 108.170.250.129 (108.170.250.129)  7.151 ms
13  108.170.250.51 (108.170.250.51)  9.975 ms 108.170.250.113 (108.170.250.113)  9.927 ms 108.170.250.51 (108.170.250.51)  9.842 ms
14  142.251.49.24 (142.251.49.24)  18.530 ms  21.204 ms 216.239.51.32 (216.239.51.32)  25.922 ms
15  74.125.253.94 (74.125.253.94)  35.244 ms 172.253.66.110 (172.253.66.110)  48.365 ms 74.125.253.94 (74.125.253.94)  24.055 ms
16  142.250.238.181 (142.250.238.181)  24.700 ms 172.253.51.243 (172.253.51.243)  33.739 ms 209.85.254.135 (209.85.254.135)  26.701 ms
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * *
25  * * *
26  * dns.google (8.8.8.8)  23.135 ms  24.084 ms
root@office1Server:~# 
```

8. Убедившись в правильности ручной настройки, отобразил её в вагрант файле. 
9. Написал отчет на гитхабе, загрузил в репозиторий вагрантфайл. 
